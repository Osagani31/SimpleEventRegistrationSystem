CREATE DATABASE eventdatabase;

USE eventdatabase;

-- Admin table
CREATE TABLE admins (
    id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(50) NOT NULL,
    password VARCHAR(100) NOT NULL
);

-- Insert default admin
INSERT INTO admins (username, password) VALUES ('admin', 'admin123');

-- Events table
CREATE TABLE events (
    event_id INT AUTO_INCREMENT PRIMARY KEY,
    event_name VARCHAR(100) NOT NULL,
    description TEXT,
    is_active BOOLEAN DEFAULT TRUE
);

-- Employees table
CREATE TABLE employees (
    employee_id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    email VARCHAR(100),
    phone VARCHAR(20)
);

-- Clients table
CREATE TABLE clients (
    client_id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    nic_number VARCHAR(20) NOT NULL,
    email VARCHAR(100),
    phone VARCHAR(20)
);

-- Reservations table
CREATE TABLE reservations (
    reservation_id INT AUTO_INCREMENT PRIMARY KEY,
    client_id INT NOT NULL,
    event_id INT NOT NULL,
    reservation_date DATE NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    status ENUM('Pending', 'Assigned', 'Completed', 'Cancelled') DEFAULT 'Pending',
    employee_id INT,
    FOREIGN KEY (client_id) REFERENCES clients(client_id),
    FOREIGN KEY (event_id) REFERENCES events(event_id),
    FOREIGN KEY (employee_id) REFERENCES employees(employee_id)
);

-- Insert sample data
INSERT INTO events (event_name, description) VALUES 
('Wedding', 'Full wedding ceremony and reception'),
('Birthday Party', 'Birthday celebrations'),
('Corporate Event', 'Business meetings and conferences'),
('Concert', 'Music performance event');

INSERT INTO employees (name, email, phone) VALUES 
('John Smith', 'john@example.com', '0771234567'),
('Sarah Johnson', 'sarah@example.com', '0777654321'),
('Michael Brown', 'michael@example.com', '0771122334');

INSERT INTO clients (name, nic_number, email, phone) VALUES 
('Alice Williams', '123456789V', 'alice@example.com', '0779876543'),
('Bob Miller', '987654321V', 'bob@example.com', '0774567890');